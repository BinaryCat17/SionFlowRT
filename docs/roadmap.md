# SionFlowRT Roadmap

## –í–∏–¥–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
SionFlowRT ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≥—Ä–∞—Ñ–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É **"Flatten-First"**. –í–º–µ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∏–ª–∏ —Å–ª–æ–∂–Ω–æ–π —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–µ—Ä–∞—Ä—Ö–∏–π, –º—ã –ø—Ä–∏–≤–æ–¥–∏–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –ø–ª–æ—Å–∫–æ–º—É –≥—Ä–∞—Ñ—É, –≥–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Pipeline (–¢–µ–∫—É—â–∏–π –≤–µ–∫—Ç–æ—Ä) üèóÔ∏è

### 1. Frontend: Logical IR
- [x] –û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –≤ JSON —Å –ø–æ—Ä—Ç–∞–º–∏ –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º–∏.
- [x] –°–∏—Å—Ç–µ–º–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö —Å–∞–±–≥—Ä–∞—Ñ–æ–≤.
- [x] **Connectivity Pass**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–µ—Ä–∞—Ä—Ö–∏–π.
- [ ] **Symbolic Expression Engine**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ö (–Ω–∞–ø—Ä. `N*M/2`).

### 2. Lowering: Inlining
- [x] **Structural Inlining**: –†–∞—Å–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å–∞–±–≥—Ä–∞—Ñ–æ–≤ –≤ –µ–¥–∏–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω.
- [x] **Global ID Generation**: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π (–Ω–∞–ø—Ä. `sub/node/op`).
- [ ] **Transition to Global DiGraph**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ flatten: –≤–º–µ—Å—Ç–æ `Vec` —Å—Ä–∞–∑—É –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `petgraph::DiGraph` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –≤ –ø—Ä–æ—Ö–æ–¥–∞—Ö.

### 3. Middle-end: Global Graph Passes
- [x] **Shape Inference**: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ —Ñ–æ—Ä–º —Ç–µ–Ω–∑–æ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Broadcasting.
- [x] **Type Checking**: –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–ª–æ—Å–∫–æ–º –≥—Ä–∞—Ñ–µ.
- [ ] **Dead Code Elimination (DCE)**: –£–¥–∞–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- [ ] **Constant Folding**: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã—Ö –ø–æ–¥–≤—ã—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

### 4. Backend & Optimization
- [ ] **Aggressive Loop Fusion**: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –µ–¥–∏–Ω—ã–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —è–¥—Ä–∞.
- [ ] **Memory Reuse Planner**: –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ —Ç–µ–Ω–∑–æ—Ä–æ–≤ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ RAM.
- [ ] **Static Buffer Allocation**: –ü–æ–ª–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ malloc/free –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.

### 5. Codegen
- [x] **C Backend**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ C-–∫–æ–¥–∞ —Å OpenMP.
- [x] **Runtime Agnostic**: –û—Ç–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (module) –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–π –æ–±–≤—è–∑–∫–∏ (runtime).
- [ ] **SIMD Vectorization**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–æ–≤ (AVX2/NEON).
- [ ] **Multi-backend support**: –ó–∞–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–¥ Rust/Wasm –∏ GPU (Metal/CUDA) –±—ç–∫–µ–Ω–¥—ã.

---

## –≠—Ç–∞–ø—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –≠—Ç–∞–ø 1: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ IR (–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å üéØ)
- [x] –û—Ç–¥–µ–ª–µ–Ω–∏–µ C-–∫–æ–¥–∞ –æ—Ç –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (`model.rs` -> `codegen_c.rs`).
- [x] –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ—Ö–æ–¥–æ–≤ (Passes).
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `DiGraph` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–ª–æ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ (–≤–º–µ—Å—Ç–æ `Vec`).

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ `Shape Engine` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ñ–æ—Ä–º–∞–º–∏.
- [ ] –ü–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è Loop Fusion –¥–ª—è —Ü–µ–ø–æ—á–µ–∫ Unary/Binary –æ–ø–µ—Ä–∞—Ü–∏–π.
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ (Memory Planning).

### –≠—Ç–∞–ø 3: –ü—Ä–æ–¥–∞–∫—à–Ω-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- [ ] **Zero-copy Pipeline**: –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.
- [ ] **AOT Compilation**: –°–±–æ—Ä–∫–∞ –≥—Ä–∞—Ñ–æ–≤ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (.a / .so).
- [ ] **Developer Tools**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–æ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ –∏ –ø—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## –§–∏–ª–æ—Å–æ—Ñ–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–ß–∏—Å—Ç–æ—Ç–∞ IR**: –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –Ω–µ –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å –æ –¥–µ—Ç–∞–ª—è—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–∞.
- **–ú–∏–Ω–∏–º–∞–ª–∏–∑–º —Ä–∞–Ω—Ç–∞–π–º–∞**: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–∫—Ä—ã—Ç—ã—Ö –∞–ª–ª–æ–∫–∞—Ü–∏–π.
- **Safety First**: –í—Å–µ –æ—à–∏–±–∫–∏ (—Ç–∏–ø—ã, —Ñ–æ—Ä–º—ã, —Å–≤—è–∑–∏) –¥–æ–ª–∂–Ω—ã –ª–æ–≤–∏—Ç—å—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
